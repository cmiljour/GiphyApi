<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="./styles.css">

</head>
<body>

<div id="topicsBtn"></div>

<div id="giphys"></div>


<script type="text/javascript">

var topics = ["ant", "grasshopper", "gnat", "fly","mosquito"];
var imgStaticArray = [];
var imgDynArray = [];


for (var i = 0; i < topics.length; i++) {
		var topicBtn = $('<button class="btn btn-default" data-name="">');
		topicBtn.data("name", topics[i]);
		topicBtn.text(topics[i]);
		$("#topicsBtn").append(topicBtn);
}

$(document).ready(function (){
	$(".btn").click(function(){
		$("#giphys").html("");
		var currentTopic = ($(this).data("name"));
	    $.ajax({url: "http://api.giphy.com/v1/gifs/search?q=" + currentTopic + "&api_key=dc6zaTOxFJmzC", success: function(result){
	    	console.log(result);
	    
	    	for (var i = 0; i < result.data.length; i++) {
	    		
	    		imgStaticArray[i] = result.data[i].images.original_still.url;
	    		imgDynArray[i] = result.data[i].images.original.url;
	    		
	    		var staticGiphyURL = result.data[i].images.original_still.url;
	    		var $div = $("<img>", {id: "imageSrc", "data-state": "static", src: staticGiphyURL, "class": "imageMod", "value": i });
	    		$("#giphys").append($div);
	        	// $("#giphys").append('<img src = "'+staticGiphyURL+'"  alt="GIF via Giphy" class="imageMod">');     	
	    	}      
	}});
});

$('body').on("click",'.imageMod', function (){

	if ($(this).data("state") === "static") {
		var imgIndex = $(this).attr("value");
		console.log(imgIndex);
		$(this).removeAttr("src").attr("src", imgDynArray[imgIndex]);
		$(this).attr('data-state', 'Dynamic');
		$(this).data('state', 'Dynamic');
		
		
	}

	else if ($(this).data("state") === "Dynamic") {
		var imgIndex = $(this).attr("value");
		$(this).removeAttr("src").attr("src", imgStaticArray[imgIndex]);
		$(this).attr('data-state', 'static');
		$(this).data('state', 'static');
	
	}

});


});
</script>


</body>
</html>